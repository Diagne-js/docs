#!/usr/bin/env node

const { execSync } = require('child_process');
const degit = require('degit');
const path = require('path');
const fs = require('fs');

const createApp = async () => {
 const projectName = process.argv[2] || 'my-diagne-app';
const targetDir = path.join(process.cwd(), projectName);

 if (fs.existsSync(targetDir)) {
        console.error(`Erreur: Le dossier ${projectName} existe d√©j√†.`);
         process.exit(1);
 }

 console.log('Cr√©ation du projet DiagneJS...');
 const emitter = degit('https://github.com/Diagne-js/Diagnejs', { cache: false, force: true });
   
try {
    await emitter.clone(targetDir);
    console.log(`Projet cr√©√© dans ${targetDir}`);
    console.log('Installation des d√©pendances...');
    execSync('npm install', { cwd: targetDir, stdio: 'inherit' });
    console.log('üéâ Votre projet est pr√™t ! Lancez-le avec :');
    console.log(`   cd ${projectName}`);
    console.log(`   npm run dev`);
} catch (err) {
     console.error('Erreur lors de la r√©ation du projet :', err);
}
}
                                
 createApp()